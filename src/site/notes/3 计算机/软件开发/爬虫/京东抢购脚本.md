---
{"dg-publish":true,"permalink":"/3 计算机/软件开发/爬虫/京东抢购脚本/","title":"京东抢购脚本"}
---


## 网上脚本
https://github.com/zas023/JdBuyer  
[GitHub - tychxn/jd-assistant: 京东抢购助手：包含登录，查询商品库存/价格，添加/清空购物车，抢购商品(下单)，查询订单等功能](https://github.com/tychxn/jd-assistant)

## JDbuyer 我的抢购物品

\#商品 sku  
\#skuId='66362341118'#二逼莲花清瘟，买了不发货  
\#skuId='2943430'#莲花清瘟京东大药房  
\#skuId='59162938640'#旗舰店莲花清瘟  
\#skuId='10048877507848'#旗舰店莲花清瘟

\#skuId='2943884'#白云山 19.8 板蓝根京东大药房  
\#skuId='3148922'#99916.6 板蓝根

\#skuId='100023017602'#妈妈要的 kn95

\#skuId='100017559634'#0.3g\*24 粒布洛芬退烧药京东自营  
\#skuId='100017559686'#0.3\*24 布洛芬京东大药房  
\#skuId='100005168885'#0.4\*24 布洛芬退烧药京东自营  
\#skuId='3156948'#0.4\*24 布洛芬京东大药房  
\#skuId='5553615'#仁和布洛芬京东自营  
\#skuId='100007160491'#仁和布洛芬京东大药房

\#skuId='100012272310'#快克复方氨酚烷胺胶囊京东大药房  
\#skuId='8535660'#感康复方氨酚烷胺片京东自营

\#skuId='100041734435'#新康泰克氨酚咖那敏片 10 片/盒京东大药房  
\#skuId='100041058365'#新康泰克氨酚咖那敏片 10 片/盒京东自营

skuId='3002832'#对乙酰氨基酚片京东大药房

\#区域 id(可根据工程 area_id 目录查找)  
\#areaId='1_2901_55554_0'  
\#areaId='5_142_42546_51267'#石家庄裕华区  
areaId='22_1930_49324_49398'#成都市双流区

## BUG
### 抢东西经常位置不对
#### 发现问题：
他有 bug，经常我规定了 areaId，确定了地址，但是他没有选择正确的地址，经常下单下到父母家。
#### 分析：
考虑整个操作有查库存和下单两步，因此应该是他两步都用了错的地址，不然如果查成都的库存在石家庄下单显然是会一直失败的。因此我考虑问题可能出现在缓存，他可能用了缓存的地址，因此在这个关键函数中，让缓存无法替换 wybareaId 问题应该就可以解决。
#### 改正：
我这里蓝色的行把 areaId 改成了 wybareaId，就应该可以解决了  
![image1](/img/user/resources/attachments/image1-68.png)
#### 总结：
可以打断点输出 areaId，看是否变成了父母家，从哪一步变成父母家的。之后就可以了。
#### 其他方法
直接清除 cookie，储存在 cookie 目录里，更换默认店铺，重新登录。
### 访问频率高就被禁止了
#### 报错信息：
2022-12-12 21:35:38,187 ERROR: Expecting property name enclosed in double quotes: line 1 column 2 (char 1)
#### 改正：
试试代理，vpn 全局代理可以。  
通过一个 python 库：my_fake_useragent 伪造 header 的方法不可以，我失败了，方法见下面链接。  
[八、python爬虫伪装 \[免费伪装ip伪装请求头\]\_51CTO博客_爬虫伪装](https://blog.51cto.com/u_14972704/4399261)
#### 总结：
不要更改默认设置的参数，也不要多线程抢。
#### 后续
12.16 日，vpn 全局代理也不行了
### 挂 vpn 后无法登录
#### 解决
关闭 vpn 后登录，登录信息被记录在 cookie 里面。之后打开 vpn，重新运行程序，直接通过 cookie 通过身份验证即可。